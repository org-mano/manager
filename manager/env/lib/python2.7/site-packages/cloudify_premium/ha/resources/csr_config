[ req ]
req_extensions = server_req_extensions
distinguished_name = req_distinguished_name

[ server_req_extensions ]
subjectAltName = @alternate_names
extendedKeyUsage = serverAuth,clientAuth

[ req_distinguished_name ]
commonName = _common_name
commonName_default = {{ common_name }}

[ alternate_names ]
DNS.1 = localhost
DNS.2 = 127.0.0.1
{% if ip %}
DNS.3 = {{ ip }}
IP.1 = {{ ip }}
{% endif %}